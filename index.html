<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset='utf-8'>
    <style>
      .square{
        width: 15px;
        height: 15px;
        //border: 1px black solid;*/
        float: left;
        position: absolute;

      }

      .BoardClass {
        border: solid black 5px;
        width: 375px;
        height: 375px;
        float: left;
        position: absolute;
      }

      .active {
        background: black;
      }
    </style>
  </head>
  <body>
    <script>
      var body = document.body;
      var board = document.createElement('div');
      var snakex = []
      var snakey = []
      var selector = 0;
      var Interval = 0;
      var directionx = 1;
      var directiony = 0;
      body.appendChild(board);
      board.className = 'BoardClass';
      board.style.top = 0 +'px';
      board.style.left = 0 + 'px';

      function CreateBoard(x, y) {
        for(var j = 0; j < y; j++) {
          for(var i = 0; i < x; i++) {
            var square = document.createElement('div');
            square.className = 'square';
            body.appendChild(square);
            square.style.left = 4 + (15 * i) + 'px';
            square.style.top = 4 + (15 * j) + 'px';
            square.dataset.x = i;
            square.dataset.y = j;
            square.dataset.status = 0;
          }
        }
      }


      function CreateSnake () {
        let x = 5;
        let y = 5;
          for( let i = 0; i < 3; i++) {
            selector = document.querySelector('[data-x="'+ x +'"][data-y="'+ y +'"]');
            selector.classList.add('active');
            snakey.push(y);
            snakex.push(x);
            x++;
          }
      }
      function run () {
          selector = document.querySelector('[data-x="'+ snakex[0] +'"][data-y="'+ snakey[0] +'"]');
          selector.classList.toggle('active');
          snakex.splice(0, 1);
          snakey.splice(0, 1);
      }


        function Move (dx, dy) {
          x = snakex[snakex.length - 1] + dx;
          y = snakey[snakey.length - 1] + dy;
          selector = document.querySelector('[data-x="'+ x +'"][data-y="'+ y +'"]');
          snakex.push(x);
          snakey.push(y);
          selector.classList.add('active');
          run();

        }


        const when_button_is_pressed = function(e) {
          let x = 0;
          let y = 0;


          console.log(e.key);
          switch(e.key) {
            case 'ArrowDown':
              directionx = 0;
              directiony = 1;
              break;
            case 'ArrowUp':
              directionx = 0;
              directiony = -1;
              break;
            case 'ArrowLeft':
              directionx = -1;
              directiony = 0;
              break;
            case 'ArrowRight':
              directionx = 1;
              directiony = 0;
              break;
            }
          }
          function getRandomInt(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive
          }
        function food(){
          this.x = getRandomInt(0, 25);
          this.y = getRandomInt(0, 25);
        }

      CreateBoard(25,25);
      CreateSnake();
      document.addEventListener('keydown', when_button_is_pressed);
      Interval = setInterval(function(){Move(directionx, directiony)}, 300)
    </script>
  </body>
</html>
